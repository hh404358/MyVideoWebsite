{"remainingRequest":"D:\\Download\\sg-vue-admin\\sg-vue-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\Download\\sg-vue-admin\\sg-vue-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Download\\sg-vue-admin\\sg-vue-admin\\src\\store\\modules\\permission.js","dependencies":[{"path":"D:\\Download\\sg-vue-admin\\sg-vue-admin\\src\\store\\modules\\permission.js","mtime":1710555745381},{"path":"D:\\Download\\sg-vue-admin\\sg-vue-admin\\babel.config.js","mtime":1710555740230},{"path":"D:\\Download\\sg-vue-admin\\sg-vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Download\\sg-vue-admin\\sg-vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Download\\sg-vue-admin\\sg-vue-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5saW5rLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgY29uc3RhbnRSb3V0ZXMgfSBmcm9tICdAL3JvdXRlcic7CmltcG9ydCB7IGdldFJvdXRlcnMgfSBmcm9tICdAL2FwaS9tZW51JzsKaW1wb3J0IExheW91dCBmcm9tICdAL2xheW91dC9pbmRleCc7CmltcG9ydCBQYXJlbnRWaWV3IGZyb20gJ0AvY29tcG9uZW50cy9QYXJlbnRWaWV3JzsKaW1wb3J0IElubmVyTGluayBmcm9tICdAL2xheW91dC9jb21wb25lbnRzL0lubmVyTGluayc7CnZhciBwZXJtaXNzaW9uID0gewogIHN0YXRlOiB7CiAgICByb3V0ZXM6IFtdLAogICAgYWRkUm91dGVzOiBbXSwKICAgIGRlZmF1bHRSb3V0ZXM6IFtdLAogICAgdG9wYmFyUm91dGVyczogW10sCiAgICBzaWRlYmFyUm91dGVyczogW10KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1JPVVRFUzogZnVuY3Rpb24gU0VUX1JPVVRFUyhzdGF0ZSwgcm91dGVzKSB7CiAgICAgIHN0YXRlLmFkZFJvdXRlcyA9IHJvdXRlczsKICAgICAgc3RhdGUucm91dGVzID0gY29uc3RhbnRSb3V0ZXMuY29uY2F0KHJvdXRlcyk7CiAgICB9LAogICAgU0VUX0RFRkFVTFRfUk9VVEVTOiBmdW5jdGlvbiBTRVRfREVGQVVMVF9ST1VURVMoc3RhdGUsIHJvdXRlcykgewogICAgICBzdGF0ZS5kZWZhdWx0Um91dGVzID0gY29uc3RhbnRSb3V0ZXMuY29uY2F0KHJvdXRlcyk7CiAgICB9LAogICAgU0VUX1RPUEJBUl9ST1VURVM6IGZ1bmN0aW9uIFNFVF9UT1BCQVJfUk9VVEVTKHN0YXRlLCByb3V0ZXMpIHsKICAgICAgLy8g6aG26YOo5a+86Iiq6I+c5Y2V6buY6K6k5re75Yqg57uf6K6h5oql6KGo5qCP5oyH5ZCR6aaW6aG1CiAgICAgIHZhciBpbmRleCA9IFt7CiAgICAgICAgcGF0aDogJ2luZGV4JywKICAgICAgICBtZXRhOiB7CiAgICAgICAgICB0aXRsZTogJ+e7n+iuoeaKpeihqCcsCiAgICAgICAgICBpY29uOiAnZGFzaGJvYXJkJwogICAgICAgIH0KICAgICAgfV07CiAgICAgIHN0YXRlLnRvcGJhclJvdXRlcnMgPSByb3V0ZXMuY29uY2F0KGluZGV4KTsKICAgIH0sCiAgICBTRVRfU0lERUJBUl9ST1VURVJTOiBmdW5jdGlvbiBTRVRfU0lERUJBUl9ST1VURVJTKHN0YXRlLCByb3V0ZXMpIHsKICAgICAgc3RhdGUuc2lkZWJhclJvdXRlcnMgPSByb3V0ZXM7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvLyDnlJ/miJDot6/nlLEKICAgIEdlbmVyYXRlUm91dGVzOiBmdW5jdGlvbiBHZW5lcmF0ZVJvdXRlcyhfcmVmKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgLy8g5ZCR5ZCO56uv6K+35rGC6Lev55Sx5pWw5o2uICAg55u05o6l6I635Y+Wcm91dGVycyDmmoLml7bms6jph4oKICAgICAgICAvLyBnZXRSb3V0ZXJzKCkudGhlbihyZXMgPT4gewogICAgICAgIC8vICAgY29uc3Qgc2RhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcy5yb3V0ZXJzKSkKICAgICAgICAvLyAgIGNvbnN0IHJkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMucm91dGVycykpCiAgICAgICAgLy8gICBjb25zdCBzaWRlYmFyUm91dGVzID0gZmlsdGVyQXN5bmNSb3V0ZXIoc2RhdGEpCiAgICAgICAgLy8gICBjb25zdCByZXdyaXRlUm91dGVzID0gZmlsdGVyQXN5bmNSb3V0ZXIocmRhdGEsIGZhbHNlLCB0cnVlKQogICAgICAgIC8vICAgcmV3cml0ZVJvdXRlcy5wdXNoKHsgcGF0aDogJyonLCByZWRpcmVjdDogJy80MDQnLCBoaWRkZW46IHRydWUgfSkKICAgICAgICAvLyAgIGNvbW1pdCgnU0VUX1JPVVRFUycsIHJld3JpdGVSb3V0ZXMpCiAgICAgICAgLy8gICBjb21taXQoJ1NFVF9TSURFQkFSX1JPVVRFUlMnLCBjb25zdGFudFJvdXRlcy5jb25jYXQoc2lkZWJhclJvdXRlcykpCiAgICAgICAgLy8gICBjb21taXQoJ1NFVF9ERUZBVUxUX1JPVVRFUycsIHNpZGViYXJSb3V0ZXMpCiAgICAgICAgLy8gICBjb21taXQoJ1NFVF9UT1BCQVJfUk9VVEVTJywgc2lkZWJhclJvdXRlcykKICAgICAgICAvLyAgIHJlc29sdmUocmV3cml0ZVJvdXRlcykKICAgICAgICAvLyB9KQogICAgICAgIGdldFJvdXRlcnMoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8vIOiOt+WPlm1lbnVzIOiHquW3see7hOijhXJvdXRlcnMKICAgICAgICAgIHZhciByb3V0ZXJzID0gYnVpbGRSb3V0ZXJUcmVlKHJlcy5tZW51cyk7CiAgICAgICAgICB2YXIgc2RhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvdXRlcnMpKTsKICAgICAgICAgIHZhciByZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocm91dGVycykpOwogICAgICAgICAgdmFyIHNpZGViYXJSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcihzZGF0YSk7CiAgICAgICAgICB2YXIgcmV3cml0ZVJvdXRlcyA9IGZpbHRlckFzeW5jUm91dGVyKHJkYXRhLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICByZXdyaXRlUm91dGVzLnB1c2goewogICAgICAgICAgICBwYXRoOiAnKicsCiAgICAgICAgICAgIHJlZGlyZWN0OiAnLzQwNCcsCiAgICAgICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCByZXdyaXRlUm91dGVzKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1NJREVCQVJfUk9VVEVSUycsIGNvbnN0YW50Um91dGVzLmNvbmNhdChzaWRlYmFyUm91dGVzKSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9ERUZBVUxUX1JPVVRFUycsIHNpZGViYXJSb3V0ZXMpOwogICAgICAgICAgY29tbWl0KCdTRVRfVE9QQkFSX1JPVVRFUycsIHNpZGViYXJSb3V0ZXMpOwogICAgICAgICAgcmVzb2x2ZShyZXdyaXRlUm91dGVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwoKZnVuY3Rpb24gYnVpbGRSb3V0ZXJUcmVlKG1lbnVzKSB7CiAgLy8g6YGN5Y6GbWVudXMKICB2YXIgcm91dGVycyA9IFtdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IG1lbnVzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgbWVudSA9IG1lbnVzW2ldOwogICAgdmFyIHJvdXRlciA9IHt9OwogICAgcm91dGVyLmhpZGRlbiA9IG1lbnUudmlzaWJsZSA9PT0gJzEnOwogICAgcm91dGVyLm5hbWUgPSBnZXRSb3V0ZXJOYW1lKG1lbnUpOwogICAgcm91dGVyLnBhdGggPSBnZXRSb3V0ZXJQYXRoKG1lbnUpOwogICAgcm91dGVyLmNvbXBvbmVudCA9IGdldENvbXBvbmVudChtZW51KTsKICAgIHJvdXRlci5tZXRhID0gZ2V0Q29tcG9uZW50TWV0YShtZW51KTsKICAgIHZhciBjTWVudXMgPSBtZW51LmNoaWxkcmVuOwoKICAgIGlmIChjTWVudXMgJiYgY01lbnVzLmxlbmd0aCA+IDAgJiYgbWVudS5tZW51VHlwZSA9PT0gJ00nKSB7CiAgICAgIHJvdXRlci5hbHdheXNTaG93ID0gdHJ1ZTsKICAgICAgcm91dGVyLnJlZGlyZWN0ID0gJ25vUmVkaXJlY3QnOwogICAgICByb3V0ZXIuY2hpbGRyZW4gPSBidWlsZFJvdXRlclRyZWUoY01lbnVzKTsKICAgIH0gZWxzZSBpZiAoaXNNZW51RnJhbWUobWVudSkpIHsKICAgICAgcm91dGVyLm1ldGEgPSBudWxsOwogICAgICB2YXIgY2hpbGRyZW5Sb3V0ZXJMaXN0ID0gW107CiAgICAgIHZhciBjaGlsZHJlbiA9IHt9OwogICAgICBjaGlsZHJlbi5wYXRoID0gbWVudS5wYXRoOwogICAgICBjaGlsZHJlbi5jb21wb25lbnQgPSBtZW51LmNvbXBvbmVudDsKICAgICAgY2hpbGRyZW4ubmFtZSA9IGdldFJvdXRlck5hbWUobWVudSk7CiAgICAgIGNoaWxkcmVuLm1ldGEgPSBnZXRDb21wb25lbnRNZXRhKG1lbnUpOwogICAgICBjaGlsZHJlblJvdXRlckxpc3QucHVzaChjaGlsZHJlbik7CiAgICAgIHJvdXRlci5jaGlsZHJlbiA9IGNoaWxkcmVuUm91dGVyTGlzdDsKICAgIH0gZWxzZSBpZiAobWVudS5wYXJlbnRJZCA9PT0gJzAnKSB7CiAgICAgIHJvdXRlci5tZXRhID0gewogICAgICAgICd0aXRsZSc6IG1lbnUubWVudU5hbWUsCiAgICAgICAgJ2ljb24nOiBtZW51Lmljb24KICAgICAgfTsKICAgICAgcm91dGVyLnBhdGggPSAnL2lubmVyJzsKICAgICAgdmFyIF9jaGlsZHJlblJvdXRlckxpc3QgPSBbXTsKICAgICAgdmFyIF9jaGlsZHJlbiA9IHt9OwogICAgICB2YXIgcm91dGVyUGF0aCA9IG1lbnUucGF0aC5yZXBsYWNlKCdodHRwOi8vJywgJycpOwogICAgICByb3V0ZXJQYXRoLnJlcGxhY2UoJ2h0dHBzOi8vJywgJycpOwogICAgICBfY2hpbGRyZW4ucGF0aCA9IHJvdXRlclBhdGg7CiAgICAgIF9jaGlsZHJlbi5jb21wb25lbnQgPSAnSW5uZXJMaW5rJzsKICAgICAgX2NoaWxkcmVuLm5hbWUgPSBnZXRSb3V0ZXJOYW1lKG1lbnUpOwogICAgICBfY2hpbGRyZW4ubWV0YSA9IGdldENvbXBvbmVudE1ldGEobWVudSk7CgogICAgICBfY2hpbGRyZW5Sb3V0ZXJMaXN0LnBzdWgoX2NoaWxkcmVuKTsKCiAgICAgIHJvdXRlci5jaGlsZHJlbiA9IF9jaGlsZHJlblJvdXRlckxpc3Q7CiAgICB9CgogICAgcm91dGVycy5wdXNoKHJvdXRlcik7CiAgfQoKICByZXR1cm4gcm91dGVyczsKfQoKZnVuY3Rpb24gZ2V0Q29tcG9uZW50TWV0YShtZW51KSB7CiAgdmFyIG1ldGEgPSB7fTsKICBtZXRhLnRpdGxlID0gbWVudS5tZW51TmFtZTsKICBtZXRhLmljb24gPSBtZW51Lmljb247CiAgbWV0YS5saW5rID0gbWVudS5saW5rOwogIHJldHVybiBtZXRhOwp9CgpmdW5jdGlvbiBnZXRDb21wb25lbnQobWVudSkgewogIGlmIChtZW51LmNvbXBvbmVudCAmJiAhaXNNZW51RnJhbWUobWVudSkpIHsKICAgIHJldHVybiBtZW51LmNvbXBvbmVudDsKICB9CgogIGlmICghbWVudS5jb21wb25lbnQgJiYgbWVudS5wYXJlbnRJZCAhPT0gJzAnKSB7CiAgICByZXR1cm4gJ0lubmVyTGluayc7CiAgfQoKICByZXR1cm4gJ0xheW91dCc7Cn0KCmZ1bmN0aW9uIGdldFJvdXRlclBhdGgobWVudSkgewogIGlmIChtZW51LnBhcmVudElkID09PSAnMCcgJiYgbWVudS5tZW51VHlwZSA9PT0gJ00nKSB7CiAgICByZXR1cm4gJy8nICsgbWVudS5wYXRoOwogIH0KCiAgaWYgKGlzTWVudUZyYW1lKG1lbnUpKSB7CiAgICByZXR1cm4gJy8nOwogIH0KCiAgcmV0dXJuIG1lbnUucGF0aDsKfQoKZnVuY3Rpb24gaXNNZW51RnJhbWUobWVudSkgewogIHJldHVybiBtZW51LnBhcmVudElkID09PSAnMCcgJiYgbWVudS5tZW51VHlwZSA9PT0gJ0MnOwp9CgpmdW5jdGlvbiBnZXRSb3V0ZXJOYW1lKG1lbnUpIHsKICByZXR1cm4gZmlyc3RUb1VwcGVyKG1lbnUucGF0aCk7Cn0gLy8g5a2X56ym5Liy6aaW5a2X5q+N6L2s5aSn5YaZ77yM5ZCO6Z2i5a2X5q+N5bCP5YaZCgovKioNCiAqIOaWueazleS4gO+8mmpz5a2X56ym5Liy5YiH5YmyDQogKiBAcGFyYW0geyp9IHN0cg0KICovCgoKZnVuY3Rpb24gZmlyc3RUb1VwcGVyKHN0cikgewogIHJldHVybiBzdHIudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZShzdHJbMF0sIHN0clswXS50b1VwcGVyQ2FzZSgpKTsKfSAvLyDpgY3ljoblkI7lj7DkvKDmnaXnmoTot6/nlLHlrZfnrKbkuLLvvIzovazmjaLkuLrnu4Tku7blr7nosaEKCgpmdW5jdGlvbiBmaWx0ZXJBc3luY1JvdXRlcihhc3luY1JvdXRlck1hcCkgewogIHZhciBsYXN0Um91dGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICB2YXIgdHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgcmV0dXJuIGFzeW5jUm91dGVyTWFwLmZpbHRlcihmdW5jdGlvbiAocm91dGUpIHsKICAgIGlmICh0eXBlICYmIHJvdXRlLmNoaWxkcmVuKSB7CiAgICAgIHJvdXRlLmNoaWxkcmVuID0gZmlsdGVyQ2hpbGRyZW4ocm91dGUuY2hpbGRyZW4pOwogICAgfQoKICAgIGlmIChyb3V0ZS5jb21wb25lbnQpIHsKICAgICAgLy8gTGF5b3V0IFBhcmVudFZpZXcg57uE5Lu254m55q6K5aSE55CGCiAgICAgIGlmIChyb3V0ZS5jb21wb25lbnQgPT09ICdMYXlvdXQnKSB7CiAgICAgICAgcm91dGUuY29tcG9uZW50ID0gTGF5b3V0OwogICAgICB9IGVsc2UgaWYgKHJvdXRlLmNvbXBvbmVudCA9PT0gJ1BhcmVudFZpZXcnKSB7CiAgICAgICAgcm91dGUuY29tcG9uZW50ID0gUGFyZW50VmlldzsKICAgICAgfSBlbHNlIGlmIChyb3V0ZS5jb21wb25lbnQgPT09ICdJbm5lckxpbmsnKSB7CiAgICAgICAgcm91dGUuY29tcG9uZW50ID0gSW5uZXJMaW5rOwogICAgICB9IGVsc2UgewogICAgICAgIHJvdXRlLmNvbXBvbmVudCA9IGxvYWRWaWV3KHJvdXRlLmNvbXBvbmVudCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAocm91dGUuY2hpbGRyZW4gIT0gbnVsbCAmJiByb3V0ZS5jaGlsZHJlbiAmJiByb3V0ZS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgcm91dGUuY2hpbGRyZW4gPSBmaWx0ZXJBc3luY1JvdXRlcihyb3V0ZS5jaGlsZHJlbiwgcm91dGUsIHR5cGUpOwogICAgfSBlbHNlIHsKICAgICAgZGVsZXRlIHJvdXRlWydjaGlsZHJlbiddOwogICAgICBkZWxldGUgcm91dGVbJ3JlZGlyZWN0J107CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfSk7Cn0KCmZ1bmN0aW9uIGZpbHRlckNoaWxkcmVuKGNoaWxkcmVuTWFwKSB7CiAgdmFyIGxhc3RSb3V0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogIHZhciBjaGlsZHJlbiA9IFtdOwogIGNoaWxkcmVuTWFwLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpbmRleCkgewogICAgaWYgKGVsLmNoaWxkcmVuICYmIGVsLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICBpZiAoZWwuY29tcG9uZW50ID09PSAnUGFyZW50VmlldycgJiYgIWxhc3RSb3V0ZXIpIHsKICAgICAgICBlbC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICBjLnBhdGggPSBlbC5wYXRoICsgJy8nICsgYy5wYXRoOwoKICAgICAgICAgIGlmIChjLmNoaWxkcmVuICYmIGMuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uY29uY2F0KGZpbHRlckNoaWxkcmVuKGMuY2hpbGRyZW4sIGMpKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGNoaWxkcmVuLnB1c2goYyk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CgogICAgaWYgKGxhc3RSb3V0ZXIpIHsKICAgICAgZWwucGF0aCA9IGxhc3RSb3V0ZXIucGF0aCArICcvJyArIGVsLnBhdGg7CiAgICB9CgogICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5jb25jYXQoZWwpOwogIH0pOwogIHJldHVybiBjaGlsZHJlbjsKfQoKZXhwb3J0IHZhciBsb2FkVmlldyA9IGZ1bmN0aW9uIGxvYWRWaWV3KHZpZXcpIHsKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHsKICAgIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZXR1cm4gcmVxdWlyZShbIkAvdmlld3MvIi5jb25jYXQodmlldyldLCByZXNvbHZlKTsKICAgIH07CiAgfSBlbHNlIHsvLyDkvb/nlKggaW1wb3J0IOWunueOsOeUn+S6p+eOr+Wig+eahOi3r+eUseaHkuWKoOi9vQogICAgLy8gcmV0dXJuICgpID0+IGltcG9ydChgQC92aWV3cy8ke3ZpZXd9YCkKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHBlcm1pc3Npb247"},{"version":3,"sources":["D:/Download/sg-vue-admin/sg-vue-admin/src/store/modules/permission.js"],"names":["constantRoutes","getRouters","Layout","ParentView","InnerLink","permission","state","routes","addRoutes","defaultRoutes","topbarRouters","sidebarRouters","mutations","SET_ROUTES","concat","SET_DEFAULT_ROUTES","SET_TOPBAR_ROUTES","index","path","meta","title","icon","SET_SIDEBAR_ROUTERS","actions","GenerateRoutes","commit","Promise","resolve","then","res","routers","buildRouterTree","menus","sdata","JSON","parse","stringify","rdata","sidebarRoutes","filterAsyncRouter","rewriteRoutes","push","redirect","hidden","i","length","menu","router","visible","name","getRouterName","getRouterPath","component","getComponent","getComponentMeta","cMenus","children","menuType","alwaysShow","isMenuFrame","childrenRouterList","parentId","menuName","routerPath","replace","psuh","link","firstToUpper","str","trim","toLowerCase","toUpperCase","asyncRouterMap","lastRouter","type","filter","route","filterChildren","loadView","childrenMap","forEach","el","c","view","process","env","NODE_ENV","require"],"mappings":";;;;;;;;;AAAA,SAASA,cAAT,QAA+B,UAA/B;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AAEA,IAAMC,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE,EADH;AAELC,IAAAA,SAAS,EAAE,EAFN;AAGLC,IAAAA,aAAa,EAAE,EAHV;AAILC,IAAAA,aAAa,EAAE,EAJV;AAKLC,IAAAA,cAAc,EAAE;AALX,GADU;AAQjBC,EAAAA,SAAS,EAAE;AACTC,IAAAA,UAAU,EAAE,oBAACP,KAAD,EAAQC,MAAR,EAAmB;AAC7BD,MAAAA,KAAK,CAACE,SAAN,GAAkBD,MAAlB;AACAD,MAAAA,KAAK,CAACC,MAAN,GAAeP,cAAc,CAACc,MAAf,CAAsBP,MAAtB,CAAf;AACD,KAJQ;AAKTQ,IAAAA,kBAAkB,EAAE,4BAACT,KAAD,EAAQC,MAAR,EAAmB;AACrCD,MAAAA,KAAK,CAACG,aAAN,GAAsBT,cAAc,CAACc,MAAf,CAAsBP,MAAtB,CAAtB;AACD,KAPQ;AAQTS,IAAAA,iBAAiB,EAAE,2BAACV,KAAD,EAAQC,MAAR,EAAmB;AACpC;AACA,UAAMU,KAAK,GAAG,CAAC;AACbC,QAAAA,IAAI,EAAE,OADO;AAEbC,QAAAA,IAAI,EAAE;AAAEC,UAAAA,KAAK,EAAE,MAAT;AAAiBC,UAAAA,IAAI,EAAE;AAAvB;AAFO,OAAD,CAAd;AAIAf,MAAAA,KAAK,CAACI,aAAN,GAAsBH,MAAM,CAACO,MAAP,CAAcG,KAAd,CAAtB;AACD,KAfQ;AAgBTK,IAAAA,mBAAmB,EAAE,6BAAChB,KAAD,EAAQC,MAAR,EAAmB;AACtCD,MAAAA,KAAK,CAACK,cAAN,GAAuBJ,MAAvB;AACD;AAlBQ,GARM;AA4BjBgB,EAAAA,OAAO,EAAE;AACP;AACAC,IAAAA,cAFO,gCAEoB;AAAA,UAAVC,MAAU,QAAVA,MAAU;AACzB,aAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA1B,QAAAA,UAAU,GAAG2B,IAAb,CAAkB,UAAAC,GAAG,EAAI;AACvB;AACA,cAAMC,OAAO,GAAGC,eAAe,CAACF,GAAG,CAACG,KAAL,CAA/B;AACA,cAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeN,OAAf,CAAX,CAAd;AACA,cAAMO,KAAK,GAAGH,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeN,OAAf,CAAX,CAAd;AACA,cAAMQ,aAAa,GAAGC,iBAAiB,CAACN,KAAD,CAAvC;AACA,cAAMO,aAAa,GAAGD,iBAAiB,CAACF,KAAD,EAAQ,KAAR,EAAe,IAAf,CAAvC;AACAG,UAAAA,aAAa,CAACC,IAAd,CAAmB;AAAEvB,YAAAA,IAAI,EAAE,GAAR;AAAawB,YAAAA,QAAQ,EAAE,MAAvB;AAA+BC,YAAAA,MAAM,EAAE;AAAvC,WAAnB;AACAlB,UAAAA,MAAM,CAAC,YAAD,EAAee,aAAf,CAAN;AACAf,UAAAA,MAAM,CAAC,qBAAD,EAAwBzB,cAAc,CAACc,MAAf,CAAsBwB,aAAtB,CAAxB,CAAN;AACAb,UAAAA,MAAM,CAAC,oBAAD,EAAuBa,aAAvB,CAAN;AACAb,UAAAA,MAAM,CAAC,mBAAD,EAAsBa,aAAtB,CAAN;AACAX,UAAAA,OAAO,CAACa,aAAD,CAAP;AACD,SAbD;AAcD,OA7BM,CAAP;AA8BD;AAjCM;AA5BQ,CAAnB;;AAgEA,SAAST,eAAT,CAAyBC,KAAzB,EAAgC;AAC9B;AACA,MAAIF,OAAO,GAAG,EAAd;;AACA,OAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,KAAK,CAACa,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,QAAIE,IAAI,GAAGd,KAAK,CAACY,CAAD,CAAhB;AACA,QAAIG,MAAM,GAAG,EAAb;AACAA,IAAAA,MAAM,CAACJ,MAAP,GAAgBG,IAAI,CAACE,OAAL,KAAiB,GAAjC;AACAD,IAAAA,MAAM,CAACE,IAAP,GAAcC,aAAa,CAACJ,IAAD,CAA3B;AACAC,IAAAA,MAAM,CAAC7B,IAAP,GAAciC,aAAa,CAACL,IAAD,CAA3B;AACAC,IAAAA,MAAM,CAACK,SAAP,GAAmBC,YAAY,CAACP,IAAD,CAA/B;AACAC,IAAAA,MAAM,CAAC5B,IAAP,GAAcmC,gBAAgB,CAACR,IAAD,CAA9B;AAEA,QAAIS,MAAM,GAAGT,IAAI,CAACU,QAAlB;;AACA,QAAID,MAAM,IAAIA,MAAM,CAACV,MAAP,GAAgB,CAA1B,IAA+BC,IAAI,CAACW,QAAL,KAAkB,GAArD,EAA0D;AACxDV,MAAAA,MAAM,CAACW,UAAP,GAAoB,IAApB;AACAX,MAAAA,MAAM,CAACL,QAAP,GAAkB,YAAlB;AACAK,MAAAA,MAAM,CAACS,QAAP,GAAkBzB,eAAe,CAACwB,MAAD,CAAjC;AACD,KAJD,MAIO,IAAII,WAAW,CAACb,IAAD,CAAf,EAAuB;AAC5BC,MAAAA,MAAM,CAAC5B,IAAP,GAAc,IAAd;AACA,UAAMyC,kBAAkB,GAAG,EAA3B;AACA,UAAMJ,QAAQ,GAAG,EAAjB;AACAA,MAAAA,QAAQ,CAACtC,IAAT,GAAgB4B,IAAI,CAAC5B,IAArB;AACAsC,MAAAA,QAAQ,CAACJ,SAAT,GAAqBN,IAAI,CAACM,SAA1B;AACAI,MAAAA,QAAQ,CAACP,IAAT,GAAgBC,aAAa,CAACJ,IAAD,CAA7B;AACAU,MAAAA,QAAQ,CAACrC,IAAT,GAAgBmC,gBAAgB,CAACR,IAAD,CAAhC;AACAc,MAAAA,kBAAkB,CAACnB,IAAnB,CAAwBe,QAAxB;AACAT,MAAAA,MAAM,CAACS,QAAP,GAAkBI,kBAAlB;AACD,KAVM,MAUA,IAAId,IAAI,CAACe,QAAL,KAAkB,GAAtB,EAA2B;AAChCd,MAAAA,MAAM,CAAC5B,IAAP,GAAc;AAAE,iBAAS2B,IAAI,CAACgB,QAAhB;AAA0B,gBAAQhB,IAAI,CAACzB;AAAvC,OAAd;AACA0B,MAAAA,MAAM,CAAC7B,IAAP,GAAc,QAAd;AACA,UAAM0C,mBAAkB,GAAG,EAA3B;AACA,UAAMJ,SAAQ,GAAG,EAAjB;AACA,UAAIO,UAAU,GAAGjB,IAAI,CAAC5B,IAAL,CAAU8C,OAAV,CAAkB,SAAlB,EACf,EADe,CAAjB;AAEAD,MAAAA,UAAU,CAACC,OAAX,CAAmB,UAAnB,EAA+B,EAA/B;AACAR,MAAAA,SAAQ,CAACtC,IAAT,GAAgB6C,UAAhB;AACAP,MAAAA,SAAQ,CAACJ,SAAT,GAAqB,WAArB;AACAI,MAAAA,SAAQ,CAACP,IAAT,GAAgBC,aAAa,CAACJ,IAAD,CAA7B;AACAU,MAAAA,SAAQ,CAACrC,IAAT,GAAgBmC,gBAAgB,CAACR,IAAD,CAAhC;;AACAc,MAAAA,mBAAkB,CAACK,IAAnB,CAAwBT,SAAxB;;AACAT,MAAAA,MAAM,CAACS,QAAP,GAAkBI,mBAAlB;AACD;;AAED9B,IAAAA,OAAO,CAACW,IAAR,CAAaM,MAAb;AACD;;AACD,SAAOjB,OAAP;AACD;;AAED,SAASwB,gBAAT,CAA0BR,IAA1B,EAAgC;AAC9B,MAAI3B,IAAI,GAAG,EAAX;AACAA,EAAAA,IAAI,CAACC,KAAL,GAAa0B,IAAI,CAACgB,QAAlB;AACA3C,EAAAA,IAAI,CAACE,IAAL,GAAYyB,IAAI,CAACzB,IAAjB;AACAF,EAAAA,IAAI,CAAC+C,IAAL,GAAYpB,IAAI,CAACoB,IAAjB;AACA,SAAO/C,IAAP;AACD;;AAED,SAASkC,YAAT,CAAsBP,IAAtB,EAA4B;AAC1B,MAAIA,IAAI,CAACM,SAAL,IAAkB,CAACO,WAAW,CAACb,IAAD,CAAlC,EAA0C;AACxC,WAAOA,IAAI,CAACM,SAAZ;AACD;;AACD,MAAI,CAACN,IAAI,CAACM,SAAN,IAAmBN,IAAI,CAACe,QAAL,KAAkB,GAAzC,EAA8C;AAC5C,WAAO,WAAP;AACD;;AACD,SAAO,QAAP;AACD;;AAED,SAASV,aAAT,CAAuBL,IAAvB,EAA6B;AAC3B,MAAIA,IAAI,CAACe,QAAL,KAAkB,GAAlB,IAAyBf,IAAI,CAACW,QAAL,KAAkB,GAA/C,EAAoD;AAClD,WAAO,MAAMX,IAAI,CAAC5B,IAAlB;AACD;;AACD,MAAIyC,WAAW,CAACb,IAAD,CAAf,EAAuB;AACrB,WAAO,GAAP;AACD;;AACD,SAAOA,IAAI,CAAC5B,IAAZ;AACD;;AACD,SAASyC,WAAT,CAAqBb,IAArB,EAA2B;AACzB,SAAOA,IAAI,CAACe,QAAL,KAAkB,GAAlB,IAAyBf,IAAI,CAACW,QAAL,KAAkB,GAAlD;AACD;;AACD,SAASP,aAAT,CAAuBJ,IAAvB,EAA6B;AAC3B,SAAOqB,YAAY,CAACrB,IAAI,CAAC5B,IAAN,CAAnB;AACD,C,CACD;;AACA;AACA;AACA;AACA;;;AACA,SAASiD,YAAT,CAAsBC,GAAtB,EAA2B;AACzB,SAAOA,GAAG,CAACC,IAAJ,GAAWC,WAAX,GAAyBN,OAAzB,CAAiCI,GAAG,CAAC,CAAD,CAApC,EAAyCA,GAAG,CAAC,CAAD,CAAH,CAAOG,WAAP,EAAzC,CAAP;AACD,C,CACD;;;AACA,SAAShC,iBAAT,CAA2BiC,cAA3B,EAA6E;AAAA,MAAlCC,UAAkC,uEAArB,KAAqB;AAAA,MAAdC,IAAc,uEAAP,KAAO;AAC3E,SAAOF,cAAc,CAACG,MAAf,CAAsB,UAAAC,KAAK,EAAI;AACpC,QAAIF,IAAI,IAAIE,KAAK,CAACpB,QAAlB,EAA4B;AAC1BoB,MAAAA,KAAK,CAACpB,QAAN,GAAiBqB,cAAc,CAACD,KAAK,CAACpB,QAAP,CAA/B;AACD;;AACD,QAAIoB,KAAK,CAACxB,SAAV,EAAqB;AACnB;AACA,UAAIwB,KAAK,CAACxB,SAAN,KAAoB,QAAxB,EAAkC;AAChCwB,QAAAA,KAAK,CAACxB,SAAN,GAAkBlD,MAAlB;AACD,OAFD,MAEO,IAAI0E,KAAK,CAACxB,SAAN,KAAoB,YAAxB,EAAsC;AAC3CwB,QAAAA,KAAK,CAACxB,SAAN,GAAkBjD,UAAlB;AACD,OAFM,MAEA,IAAIyE,KAAK,CAACxB,SAAN,KAAoB,WAAxB,EAAqC;AAC1CwB,QAAAA,KAAK,CAACxB,SAAN,GAAkBhD,SAAlB;AACD,OAFM,MAEA;AACLwE,QAAAA,KAAK,CAACxB,SAAN,GAAkB0B,QAAQ,CAACF,KAAK,CAACxB,SAAP,CAA1B;AACD;AACF;;AACD,QAAIwB,KAAK,CAACpB,QAAN,IAAkB,IAAlB,IAA0BoB,KAAK,CAACpB,QAAhC,IAA4CoB,KAAK,CAACpB,QAAN,CAAeX,MAA/D,EAAuE;AACrE+B,MAAAA,KAAK,CAACpB,QAAN,GAAiBjB,iBAAiB,CAACqC,KAAK,CAACpB,QAAP,EAAiBoB,KAAjB,EAAwBF,IAAxB,CAAlC;AACD,KAFD,MAEO;AACL,aAAOE,KAAK,CAAC,UAAD,CAAZ;AACA,aAAOA,KAAK,CAAC,UAAD,CAAZ;AACD;;AACD,WAAO,IAAP;AACD,GAvBM,CAAP;AAwBD;;AAED,SAASC,cAAT,CAAwBE,WAAxB,EAAyD;AAAA,MAApBN,UAAoB,uEAAP,KAAO;AACvD,MAAIjB,QAAQ,GAAG,EAAf;AACAuB,EAAAA,WAAW,CAACC,OAAZ,CAAoB,UAACC,EAAD,EAAKhE,KAAL,EAAe;AACjC,QAAIgE,EAAE,CAACzB,QAAH,IAAeyB,EAAE,CAACzB,QAAH,CAAYX,MAA/B,EAAuC;AACrC,UAAIoC,EAAE,CAAC7B,SAAH,KAAiB,YAAjB,IAAiC,CAACqB,UAAtC,EAAkD;AAChDQ,QAAAA,EAAE,CAACzB,QAAH,CAAYwB,OAAZ,CAAoB,UAAAE,CAAC,EAAI;AACvBA,UAAAA,CAAC,CAAChE,IAAF,GAAS+D,EAAE,CAAC/D,IAAH,GAAU,GAAV,GAAgBgE,CAAC,CAAChE,IAA3B;;AACA,cAAIgE,CAAC,CAAC1B,QAAF,IAAc0B,CAAC,CAAC1B,QAAF,CAAWX,MAA7B,EAAqC;AACnCW,YAAAA,QAAQ,GAAGA,QAAQ,CAAC1C,MAAT,CAAgB+D,cAAc,CAACK,CAAC,CAAC1B,QAAH,EAAa0B,CAAb,CAA9B,CAAX;AACA;AACD;;AACD1B,UAAAA,QAAQ,CAACf,IAAT,CAAcyC,CAAd;AACD,SAPD;AAQA;AACD;AACF;;AACD,QAAIT,UAAJ,EAAgB;AACdQ,MAAAA,EAAE,CAAC/D,IAAH,GAAUuD,UAAU,CAACvD,IAAX,GAAkB,GAAlB,GAAwB+D,EAAE,CAAC/D,IAArC;AACD;;AAEDsC,IAAAA,QAAQ,GAAGA,QAAQ,CAAC1C,MAAT,CAAgBmE,EAAhB,CAAX;AACD,GAnBD;AAoBA,SAAOzB,QAAP;AACD;;AAED,OAAO,IAAMsB,QAAQ,GAAG,SAAXA,QAAW,CAACK,IAAD,EAAU;AAChC,MAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1C,WAAO,UAAC3D,OAAD;AAAA,aAAa4D,OAAO,CAAC,mBAAYJ,IAAZ,EAAD,EAAsBxD,OAAtB,CAApB;AAAA,KAAP;AACD,GAFD,MAEO,CACL;AACA;AACD;AACF,CAPM;AASP,eAAetB,UAAf","sourcesContent":["import { constantRoutes } from '@/router'\r\nimport { getRouters } from '@/api/menu'\r\nimport Layout from '@/layout/index'\r\nimport ParentView from '@/components/ParentView'\r\nimport InnerLink from '@/layout/components/InnerLink'\r\n\r\nconst permission = {\r\n  state: {\r\n    routes: [],\r\n    addRoutes: [],\r\n    defaultRoutes: [],\r\n    topbarRouters: [],\r\n    sidebarRouters: []\r\n  },\r\n  mutations: {\r\n    SET_ROUTES: (state, routes) => {\r\n      state.addRoutes = routes\r\n      state.routes = constantRoutes.concat(routes)\r\n    },\r\n    SET_DEFAULT_ROUTES: (state, routes) => {\r\n      state.defaultRoutes = constantRoutes.concat(routes)\r\n    },\r\n    SET_TOPBAR_ROUTES: (state, routes) => {\r\n      // 顶部导航菜单默认添加统计报表栏指向首页\r\n      const index = [{\r\n        path: 'index',\r\n        meta: { title: '统计报表', icon: 'dashboard' }\r\n      }]\r\n      state.topbarRouters = routes.concat(index)\r\n    },\r\n    SET_SIDEBAR_ROUTERS: (state, routes) => {\r\n      state.sidebarRouters = routes\r\n    }\r\n  },\r\n  actions: {\r\n    // 生成路由\r\n    GenerateRoutes({ commit }) {\r\n      return new Promise(resolve => {\r\n        // 向后端请求路由数据   直接获取routers 暂时注释\r\n        // getRouters().then(res => {\r\n        //   const sdata = JSON.parse(JSON.stringify(res.routers))\r\n        //   const rdata = JSON.parse(JSON.stringify(res.routers))\r\n        //   const sidebarRoutes = filterAsyncRouter(sdata)\r\n        //   const rewriteRoutes = filterAsyncRouter(rdata, false, true)\r\n        //   rewriteRoutes.push({ path: '*', redirect: '/404', hidden: true })\r\n        //   commit('SET_ROUTES', rewriteRoutes)\r\n        //   commit('SET_SIDEBAR_ROUTERS', constantRoutes.concat(sidebarRoutes))\r\n        //   commit('SET_DEFAULT_ROUTES', sidebarRoutes)\r\n        //   commit('SET_TOPBAR_ROUTES', sidebarRoutes)\r\n        //   resolve(rewriteRoutes)\r\n        // })\r\n\r\n        getRouters().then(res => {\r\n          // 获取menus 自己组装routers\r\n          const routers = buildRouterTree(res.menus)\r\n          const sdata = JSON.parse(JSON.stringify(routers))\r\n          const rdata = JSON.parse(JSON.stringify(routers))\r\n          const sidebarRoutes = filterAsyncRouter(sdata)\r\n          const rewriteRoutes = filterAsyncRouter(rdata, false, true)\r\n          rewriteRoutes.push({ path: '*', redirect: '/404', hidden: true })\r\n          commit('SET_ROUTES', rewriteRoutes)\r\n          commit('SET_SIDEBAR_ROUTERS', constantRoutes.concat(sidebarRoutes))\r\n          commit('SET_DEFAULT_ROUTES', sidebarRoutes)\r\n          commit('SET_TOPBAR_ROUTES', sidebarRoutes)\r\n          resolve(rewriteRoutes)\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\nfunction buildRouterTree(menus) {\r\n  // 遍历menus\r\n  var routers = []\r\n  for (var i = 0; i < menus.length; i++) {\r\n    var menu = menus[i]\r\n    var router = {}\r\n    router.hidden = menu.visible === '1'\r\n    router.name = getRouterName(menu)\r\n    router.path = getRouterPath(menu)\r\n    router.component = getComponent(menu)\r\n    router.meta = getComponentMeta(menu)\r\n\r\n    var cMenus = menu.children\r\n    if (cMenus && cMenus.length > 0 && menu.menuType === 'M') {\r\n      router.alwaysShow = true\r\n      router.redirect = 'noRedirect'\r\n      router.children = buildRouterTree(cMenus)\r\n    } else if (isMenuFrame(menu)) {\r\n      router.meta = null\r\n      const childrenRouterList = []\r\n      const children = {}\r\n      children.path = menu.path\r\n      children.component = menu.component\r\n      children.name = getRouterName(menu)\r\n      children.meta = getComponentMeta(menu)\r\n      childrenRouterList.push(children)\r\n      router.children = childrenRouterList\r\n    } else if (menu.parentId === '0') {\r\n      router.meta = { 'title': menu.menuName, 'icon': menu.icon }\r\n      router.path = '/inner'\r\n      const childrenRouterList = []\r\n      const children = {}\r\n      var routerPath = menu.path.replace('http://',\r\n        '')\r\n      routerPath.replace('https://', '')\r\n      children.path = routerPath\r\n      children.component = 'InnerLink'\r\n      children.name = getRouterName(menu)\r\n      children.meta = getComponentMeta(menu)\r\n      childrenRouterList.psuh(children)\r\n      router.children = childrenRouterList\r\n    }\r\n\r\n    routers.push(router)\r\n  }\r\n  return routers\r\n}\r\n\r\nfunction getComponentMeta(menu) {\r\n  var meta = {}\r\n  meta.title = menu.menuName\r\n  meta.icon = menu.icon\r\n  meta.link = menu.link\r\n  return meta\r\n}\r\n\r\nfunction getComponent(menu) {\r\n  if (menu.component && !isMenuFrame(menu)) {\r\n    return menu.component\r\n  }\r\n  if (!menu.component && menu.parentId !== '0') {\r\n    return 'InnerLink'\r\n  }\r\n  return 'Layout'\r\n}\r\n\r\nfunction getRouterPath(menu) {\r\n  if (menu.parentId === '0' && menu.menuType === 'M') {\r\n    return '/' + menu.path\r\n  }\r\n  if (isMenuFrame(menu)) {\r\n    return '/'\r\n  }\r\n  return menu.path\r\n}\r\nfunction isMenuFrame(menu) {\r\n  return menu.parentId === '0' && menu.menuType === 'C'\r\n}\r\nfunction getRouterName(menu) {\r\n  return firstToUpper(menu.path)\r\n}\r\n// 字符串首字母转大写，后面字母小写\r\n/**\r\n * 方法一：js字符串切割\r\n * @param {*} str\r\n */\r\nfunction firstToUpper(str) {\r\n  return str.trim().toLowerCase().replace(str[0], str[0].toUpperCase())\r\n}\r\n// 遍历后台传来的路由字符串，转换为组件对象\r\nfunction filterAsyncRouter(asyncRouterMap, lastRouter = false, type = false) {\r\n  return asyncRouterMap.filter(route => {\r\n    if (type && route.children) {\r\n      route.children = filterChildren(route.children)\r\n    }\r\n    if (route.component) {\r\n      // Layout ParentView 组件特殊处理\r\n      if (route.component === 'Layout') {\r\n        route.component = Layout\r\n      } else if (route.component === 'ParentView') {\r\n        route.component = ParentView\r\n      } else if (route.component === 'InnerLink') {\r\n        route.component = InnerLink\r\n      } else {\r\n        route.component = loadView(route.component)\r\n      }\r\n    }\r\n    if (route.children != null && route.children && route.children.length) {\r\n      route.children = filterAsyncRouter(route.children, route, type)\r\n    } else {\r\n      delete route['children']\r\n      delete route['redirect']\r\n    }\r\n    return true\r\n  })\r\n}\r\n\r\nfunction filterChildren(childrenMap, lastRouter = false) {\r\n  var children = []\r\n  childrenMap.forEach((el, index) => {\r\n    if (el.children && el.children.length) {\r\n      if (el.component === 'ParentView' && !lastRouter) {\r\n        el.children.forEach(c => {\r\n          c.path = el.path + '/' + c.path\r\n          if (c.children && c.children.length) {\r\n            children = children.concat(filterChildren(c.children, c))\r\n            return\r\n          }\r\n          children.push(c)\r\n        })\r\n        return\r\n      }\r\n    }\r\n    if (lastRouter) {\r\n      el.path = lastRouter.path + '/' + el.path\r\n    }\r\n\r\n    children = children.concat(el)\r\n  })\r\n  return children\r\n}\r\n\r\nexport const loadView = (view) => {\r\n  if (process.env.NODE_ENV === 'development') {\r\n    return (resolve) => require([`@/views/${view}`], resolve)\r\n  } else {\r\n    // 使用 import 实现生产环境的路由懒加载\r\n    // return () => import(`@/views/${view}`)\r\n  }\r\n}\r\n\r\nexport default permission\r\n"]}]}