{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-79b45a7a\"],{\"13c6\":function(t,e,o){\"use strict\";o(\"1cc5\")},\"1cc5\":function(t,e,o){},c8b0:function(t,e,o){\"use strict\";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"div\",{staticClass:\"app-container\"},[o(\"el-form\",{ref:\"form\",attrs:{model:t.form,\"label-width\":\"90px\"}},[o(\"el-row\",{attrs:{gutter:20}},[o(\"el-col\",{attrs:{span:12}},[o(\"el-form-item\",{attrs:{label:\"视频标题\"}},[o(\"el-input\",{attrs:{placeholder:\"请输入视频标题\",maxlength:\"30\"},model:{value:t.form.videoTitle,callback:function(e){t.$set(t.form,\"videoTitle\",e)},expression:\"form.videoTitle\"}})],1)],1),o(\"el-col\",{attrs:{span:6}},[o(\"el-form-item\",{attrs:{label:\"分类\"}},[o(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:t.form.videoTypeId,callback:function(e){t.$set(t.form,\"videoTypeId\",e)},expression:\"form.videoTypeId\"}},t._l(t.categoryList,(function(t,e){return o(\"el-option\",{key:e,attrs:{label:t,value:e+1}})})),1)],1)],1)],1),o(\"el-row\",{attrs:{gutter:20}},[o(\"el-col\",{attrs:{span:12}},[o(\"el-form-item\",{attrs:{label:\"视频摘要\"}},[o(\"el-input\",{attrs:{type:\"textarea\"},model:{value:t.form.videoInfo,callback:function(e){t.$set(t.form,\"videoInfo\",e)},expression:\"form.videoInfo\"}})],1)],1),o(\"el-col\",{attrs:{span:12}},[o(\"el-form-item\",{attrs:{label:\"视频状态\"}},[o(\"el-radio-group\",{model:{value:t.form.videoStateId,callback:function(e){t.$set(t.form,\"videoStateId\",e)},expression:\"form.videoStateId\"}},[o(\"el-radio\",{key:\"1\",attrs:{label:\"1\"}},[t._v(\"认证中\")]),o(\"el-radio\",{key:\"2\",attrs:{label:\"2\"}},[t._v(\"已认证\")]),o(\"el-radio\",{key:\"3\",attrs:{label:\"3\"}},[t._v(\"认证失败\")]),o(\"el-radio\",{key:\"4\",attrs:{label:\"4\"}},[t._v(\"上架\")]),o(\"el-radio\",{key:\"5\",attrs:{label:\"5\"}},[t._v(\"下架\")])],1)],1)],1)],1),o(\"el-row\",{attrs:{gutter:20}}),o(\"el-row\",{attrs:{gutter:20}},[o(\"el-col\",{attrs:{span:12}},[o(\"el-form-item\",{attrs:{label:\"缩略图\"}},[o(\"el-upload\",{staticClass:\"upload-demo\",attrs:{\"file-list\":t.fileList,\"list-type\":\"picture\",drag:\"\",name:\"img\",action:this.imgUrl,\"on-remove\":t.fileRemove,limit:1,\"http-request\":t.handleUpload,\"on-exceed\":t.onExceed}},[o(\"i\",{staticClass:\"el-icon-upload\"}),o(\"div\",{staticClass:\"el-upload__text\"},[t._v(\"将文件拖到此处，或\"),o(\"em\",[t._v(\"点击上传\")])]),o(\"div\",{staticClass:\"el-upload__tip\",attrs:{slot:\"tip\"},slot:\"tip\"},[t._v(\"只能上传jpg/png文件，且不超过2MB\")])])],1)],1),o(\"el-col\",{attrs:{span:12}},[o(\"el-form-item\",[o(\"el-button\",{attrs:{type:\"primary\",size:\"medium\"},on:{click:t.handleSubmit}},[t._v(t._s(t.aId?\"更新\":\"发布\"))])],1)],1)],1),o(\"el-row\",[o(\"el-form-item\",{attrs:{label:\"视频\"}},[o(\"el-upload\",{staticClass:\"upload-demo\",attrs:{\"file-list\":t.fileList,\"list-type\":\"picture\",drag:\"\",name:\"video\",action:this.videoUrl,\"on-remove\":t.fileRemove,limit:1,\"http-request\":t.handleUpload,\"on-exceed\":t.onExceed}},[o(\"i\",{staticClass:\"el-icon-upload\"}),o(\"div\",{staticClass:\"el-upload__text\"},[t._v(\"将文件拖到此处，或\"),o(\"em\",[t._v(\"点击上传\")])]),o(\"div\",{staticClass:\"el-upload__tip\",attrs:{slot:\"tip\"},slot:\"tip\"},[t._v(\"只能上传mp4文件\")])])],1)],1)],1)],1)},i=[],r=(o(\"b0c0\"),o(\"b775\")),l=o(\"4360\");function n(t){var e=new FormData;return e.append(\"img\",t),Object(r[\"a\"])({url:l[\"a\"].state.BaseUrl+\"/content/video/uploadImg\",headers:{\"Content-Type\":\"multipart/form-data\"},method:\"post\",data:e})}function s(t){var e=new FormData;return Object(r[\"a\"])({url:l[\"a\"].state.BaseUrl+\"/content/video/uploadVideo\",headers:{\"Content-Type\":\"multipart/form-data\"},method:\"post\",data:e})}var d=o(\"e0a7\"),c={name:\"Add\",data:function(){return{form:{videoTitle:\"\",videoTypeId:\"\",videoInfo:\"\",videoStateId:\"\",videoUrl:\"\",thunmbnailUrl:\"\"},categoryList:[\"影视\",\"新闻\",\"生活\",\"美食\",\"音乐\",\"电视剧\",\"舞蹈\",\"动漫\",\"娱乐\",\"科技数码\",\"体育\",\"美妆\"],aId:-1,fileList:[],imgUrl:\"\",videoUrl:\"\"}},watch:{$route:{handler:function(t){this.aId=t.query&&t.query.id,console.log(this.aId)},immediate:!0}},created:function(){this.imgUrl=\"http://localhost:8989/content/video/uploadImage\",this.videoUrl=\"http://localhost:8989/content/video/uploadVideo\",this.aId&&this.getVideo()},methods:{getVideo:function(){var t=this;Object(d[\"c\"])(this.aId).then((function(e){t.form=e,t.fileList.push({name:\"缩略图\",url:e.thunmbnailUrl}),t.fileList.push({name:\"视频\",url:e.videoUrl})}))},handleSubmit:function(){var t=this;this.aId?Object(d[\"e\"])(this.form).then((function(e){t.$modal.msgSuccess(\"视频更新成功\"),t.$router.push({path:\"/content/video\"})})):Object(d[\"a\"])(this.form).then((function(e){t.$modal.msgSuccess(\"视频发布成功\"),t.$router.push({path:\"/content/video\"})}))},onExceed:function(){this.$message.error(\"只能上传一个文件(图片文件)\")},handleUploadImg:function(t){var e=this;n(t.file).then((function(o){e.form.thunmbnailUrl=o,e.fileList.push({name:t.file.name,url:o})})).catch((function(t){e.$message.error(t.msg)}))},handleUploadVideo:function(t){var e=this;s(t.file).then((function(o){e.form.videoUrl=o,e.fileList.push({name:t.file.name,url:o})})).catch((function(t){e.$message.error(t.msg)}))},fileRemove:function(t,e){this.fileList.pop()},addImg:function(t,e){var o=this;n(e).then((function(e){o.$refs.md.$img2Url(t,e)})).catch((function(t){o.$message.error(t.msg)}))},addVideo:function(t,e){var o=this;s(e).then((function(e){o.$refs.md.$img2Url(t,e)})).catch((function(t){o.$message.error(t.msg)}))},beforeAvatarUpload:function(t){var e=\"image/jpeg\"===t.type,o=t.size/1024/1024<2;return o||this.$message.error(\"上传头像图片大小不能超过 2MB!\"),e&&o}}},u=c,m=(o(\"13c6\"),o(\"2877\")),f=Object(m[\"a\"])(u,a,i,!1,null,\"354e1c31\",null);e[\"default\"]=f.exports},e0a7:function(t,e,o){\"use strict\";o.d(e,\"a\",(function(){return i})),o.d(e,\"d\",(function(){return r})),o.d(e,\"b\",(function(){return l})),o.d(e,\"c\",(function(){return n})),o.d(e,\"e\",(function(){return s}));var a=o(\"b775\");function i(t){return Object(a[\"a\"])({url:\"/content/video\",method:\"post\",data:t})}function r(t){return Object(a[\"a\"])({url:\"/content/video/list\",method:\"get\",params:t})}function l(t){return Object(a[\"a\"])({url:\"/content/video/\"+t,method:\"delete\"})}function n(t){return Object(a[\"a\"])({url:\"/content/video/\"+t,method:\"get\"})}function s(t){return Object(a[\"a\"])({url:\"/content/video\",method:\"put\",data:t})}}}]);","extractedComments":[]}